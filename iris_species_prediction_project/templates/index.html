<!DOCTYPE html>
<html>
  <head>
    <title>Upload Image and Text</title>
  </head>
  <body>
    <h1>Upload Image and Text</h1>

    <form enctype="multipart/form-data">
      <p>
        <label for="file">Select an image:</label><br />
        <input type="file" id="file" name="file" />
      </p>
      <p>
        <label for="text">Enter json data</label><br />
        <textarea id="text" name="text" rows="20" cols="100"></textarea>
      </p>
      <p>
        <button type="button" onclick="upload()">Upload</button>
      </p>
    </form>

    <p id="response"></p>

    <script>
      function upload() {
        var fileInput = document.getElementById("file");
        var textInput = document.getElementById("text");

        var file = fileInput.files[0];
        var text = textInput.value;

        var formData = new FormData();
        formData.append("file", file);
        formData.append("text", text);

        var xhr = new XMLHttpRequest();
        xhr.open("POST", "/upload");

        xhr.onload = function () {
          if (xhr.status === 200) {
            document.getElementById("response").textContent = xhr.responseText;
          } else {
            alert("Error: " + xhr.statusText);
          }
        };

        xhr.send(formData);
      }
    </script>
  </body>
</html>
